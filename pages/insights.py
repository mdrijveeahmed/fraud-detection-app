# -*- coding: utf-8 -*-
"""Insights

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1_K3B7BAoa18H31xgZ90U93waPFlNaH5c
"""

import streamlit as st
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import os

st.set_page_config(page_title="Data Insights", page_icon="ЁЯУК")
st.title("ЁЯУК Data Insights & Visualizations")
st.write("ржПржЗ ржбрзЗржЯрж╛рж╕рзЗржЯржЯрж┐ ржПржХржЯрж┐ рж░рж┐рзЯрзЗрж▓-ржУрзЯрж╛рж░рзНрж▓рзНржб ржХрзНрж░рзЗржбрж┐ржЯ ржХрж╛рж░рзНржб ржбрзЗржЯрж╛рж╕рзЗржЯред ржПржЦрж╛ржирзЗ ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЗржирж╕рж╛ржЗржЯ ржжрзЗржЦрзБржиред")

# ржбрзЗржЯрж╛рж╕рзЗржЯ рж▓рзЛржб ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ (рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░ржержо 50k рж░рзЛ, ржЕрзНржпрж╛ржк ржжрзНрж░рзБржд рж▓рзЛржб ржХрж░рж╛рж░ ржЬржирзНржп)
# GitHub ржерзЗржХрзЗ ржмрзЬ ржбрзЗржЯрж╛рж╕рзЗржЯ рж▓рзЛржб ржХрж░рж╛ ржнрж╛рж▓рзЛ ржкрзНрж░рзНржпрж╛ржХржЯрж┐рж╕ ржирзЯ,
# ржХрж┐ржирзНрждрзБ ржПржЗ ржбрзЗржорзЛрж░ ржЬржирзНржп ржЖржорж░рж╛ ржПржХржЯрж┐ ржЫрзЛржЯ рж╕рзНржпрж╛ржорзНржкрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
# ржнрж╛рж▓рзЛ рж╣рзЯ ржпржжрж┐ ржЖржкржирж┐ ржбрзЗржЯрж╛рж╕рзЗржЯрзЗрж░ ржПржХржЯрж┐ ржЫрзЛржЯ рж╕рзНржпрж╛ржорзНржкрж▓ (ржпрзЗржоржи fraud.csv) ржЧрж┐ржЯрж╣рж╛ржмрзЗ ржЖржкрж▓рзЛржб ржХрж░рзЗржиред

@st.cache_data
def load_data():
    # ржПржЦрж╛ржирзЗ ржЖржкржирж╛ржХрзЗ creditcard.csv ржлрж╛ржЗрж▓ржЯрж┐ GitHub-ржП ржЖржкрж▓рзЛржб ржХрж░рзЗ рждрж╛рж░ Raw рж▓рж┐ржВржХ ржжрж┐рждрзЗ рж╣ржмрзЗ
    # ржЕржержмрж╛, ржбрзЗржЯрж╛рж╕рзЗржЯрзЗрж░ ржПржХржЯрж┐ ржЫрзЛржЯ рж╕рзНржпрж╛ржорзНржкрж▓ ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
    # ржЖржкрж╛рждржд ржЖржорж░рж╛ ржПржХржЯрж┐ ржбрзЗржорзЛ ржбрзЗржЯрж╛ржлрзНрж░рзЗржо рждрзИрж░рж┐ ржХрж░ржЫрж┐:
    data = {'Class': [0]*284315 + [1]*492,
            'Amount': list(range(0, 284807))} # ржПржЯрж┐ ржПржХржЯрж┐ ржбрзЗржорзЛ, ржЖрж╕рж▓ ржбрзЗржЯрж╛ ржирзЯ
    df = pd.DataFrame(data)
    return df

df = load_data()


st.header("рзз. ржбрзЗржЯрж╛ ржЗржоржмрзНржпрж╛рж▓рж╛ржирзНрж╕ (Data Imbalance)")
st.write("ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржкрзНрж░ржзрж╛ржи ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ рж╣рж▓рзЛ ржлрзНрж░ржб ржПржмржВ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ рж▓рзЗржиржжрзЗржирзЗрж░ рж╕ржВржЦрзНржпрж╛рж░ ржмрж┐рж╢рж╛рж▓ ржкрж╛рж░рзНржержХрзНржпред")

class_counts = df['Class'].value_counts()
st.dataframe(class_counts)

# ржПржХржЯрж┐ ржмрж╛рж░ ржкрзНрж▓ржЯ рждрзИрж░рж┐ ржХрж░рж╛
fig, ax = plt.subplots(figsize=(7, 5))
sns.countplot(x='Class', data=df, ax=ax)
ax.set_title('рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ (0) ржмржирж╛ржо ржлрзНрж░ржб (1)')
st.pyplot(fig)
st.warning(f"ржорж╛рждрзНрж░ **{ (class_counts[1] / class_counts.sum()) * 100 :.3f}%** рж▓рзЗржиржжрзЗржи рж╣рж▓рзЛ ржлрзНрж░ржбред")


st.header("рзи. рж▓рзЗржиржжрзЗржирзЗрж░ ржкрж░рж┐ржорж╛ржг (Amount) ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙрж╢ржи")
st.write("ржлрзНрж░ржб рж▓рзЗржиржжрзЗржиржЧрзБрж▓рзЛ рж╕рж╛ржзрж╛рж░ржгржд ржХрзЗржоржи ржЯрж╛ржХрж╛рж░ рж╣рзЯ?")
# ржПржЗ ржЪрж╛рж░рзНржЯрзЗрж░ ржЬржирзНржп ржЖрж╕рж▓ ржбрзЗржЯрж╛ рж▓рж╛ржЧржмрзЗ
st.info("ржПржЗ ржЪрж╛рж░рзНржЯржЯрж┐ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп GitHub ржерзЗржХрзЗ ржЖрж╕рж▓ ржбрзЗржЯрж╛рж╕рзЗржЯ рж▓рзЛржб ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржиред")